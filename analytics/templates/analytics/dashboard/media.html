{% extends "analytics/dashboard/template.html" %}

{% load static %}

{% block main_content %}
	<section class="content-with-menu content-with-menu-has-toolbar media-gallery">
						<div class="content-with-menu-container">
							<div class="inner-menu-toggle">
								<a href="#" class="inner-menu-expand" data-open="inner-menu">
									Show Bar <i class="fa fa-chevron-right"></i>
								</a>
							</div>
							
							<menu id="content-menu" class="inner-menu" role="menu">
								<div class="nano">
									<div class="nano-content">
							
										<div class="inner-menu-toggle-inside">
											<a href="#" class="inner-menu-collapse">
												<i class="fa fa-chevron-up visible-xs-inline"></i><i class="fa fa-chevron-left hidden-xs-inline"></i> Hide Bar
											</a>
											<a href="#" class="inner-menu-expand" data-open="inner-menu">
												Show Bar <i class="fa fa-chevron-down"></i>
											</a>
										</div>
							
										<div class="inner-menu-content">
							
											<a class="btn btn-block btn-primary btn-md pt-sm pb-sm text-md">
												<i class="fa fa-upload mr-xs"></i>
												Upload Files
											</a>
							
											<hr class="separator" />
							
											<div class="sidebar-widget m-none">
												<div class="widget-header clearfix">
													<h6 class="title pull-left mt-xs">Folders</h6>
													<div class="pull-right">
														<a href="#" class="btn btn-dark btn-sm btn-widget-act" data-toggle="modal" data-target="#add_folder">Add Folder</a>
													</div>
												</div>
												<div class="widget-content">
													<ul class="mg-folders">
														{% for directory in directories %}
															{% if directory != ".DS_Store" %}
															{% if directory == "report_images"%}
															<li>
																<input type="hidden" name="folder" value="{{ directory }}" />
																<a href="{% url 'analytics:media' %}" class="menu-item"><i class="fa fa-folder"></i> {{ directory }}</a>
															<div class="item-options">
																<a href="#">
																	<i class="fa fa-edit"></i>
																</a>
																<a href="#" class="text-danger">
																	<i class="fa fa-times"></i>
																</a>
															</div>
														</li>
															{% else %}
														<li>
															<form method="POST" action="{% url 'analytics:media' %}">
																{% csrf_token %}
																<input type="hidden" name="folder" value="{{ directory }}" />
																<button type="submit" class="menu-item"><i class="fa fa-folder"></i> {{ directory }}</button>
															</form>
															<div class="item-options">
																<a href="#">
																	<i class="fa fa-edit"></i>
																</a>
																<a href="#" class="text-danger">
																	<i class="fa fa-times"></i>
																</a>
															</div>
														</li>
															{% endif %}
															{% endif %}
														{% endfor %}
													</ul>
												</div>
											</div>
							
											<hr class="separator" />
							
											<!-- <div class="sidebar-widget m-none">
												<div class="widget-header">
													<h6 class="title">Labels</h6>
													<span class="widget-toggle">+</span>
												</div>
												<div class="widget-content">
													<ul class="mg-tags">
														<li><a href="#">Design</a></li>
														<li><a href="#">Projects</a></li>
														<li><a href="#">Photos</a></li>
														<li><a href="#">Sites</a></li>
														<li><a href="#">Documentation</a></li>
														<li><a href="#">Inventory</a></li>
														<li><a href="#">Images</a></li>
														<li><a href="#">Takes</a></li>
													</ul>
												</div>
											</div> -->
										</div>
									</div>
								</div>
							</menu>
							<div class="inner-body mg-main">
							
								<div class="inner-toolbar clearfix">
									<ul>
										<li>
											<a href="#" id="mgSelectAll"><i class="fa fa-check-square"></i> <span data-all-text="Select All" data-none-text="Select None">Select All</span></a>
										</li>
										<li>
											<a href="#" data-toggle="modal" data-target="#add_to_folder"><i class="fa fa-pencil"></i> Add to folder</a>
										</li>
										<li>
											<a href="#" data-toggle="modal" data-target="#delete_images_confirm"><i class="fa fa-trash-o"></i> Delete</a>
										</li>
										<li class="right" data-sort-source data-sort-id="media-gallery">
											<ul class="nav nav-pills nav-pills-primary">
												<li>
													<label>Filter:</label>
												</li>
												<li class="active">
													<a data-option-value="*" href="#all">All</a>
												</li>
												<!-- <li>
													<a data-option-value=".document" href="#document">Documents</a>
												</li> -->
												<li>
													<a data-option-value=".image" href="#image">Images</a>
												</li>
												<li>
													<a data-option-value=".video" href="#video">Videos</a>
												</li>
											</ul>
										</li>
									</ul>
								</div>
								<div class="row mg-files" data-sort-destination data-sort-id="media-gallery">
									{% for image in images %}
									<div class="isotope-item image col-sm-6 col-md-4 col-lg-3 mt-2">
										<div class="thumbnail">
											<div class="thumb-preview">
												<a class="thumb-image" href="{% static 'analytics/assets/images/projects/project-1.jpg' %}">
													<img src="{{ MEDIA_URL }}{{ image.image.url }}" class="img-responsive" width="100%" alt="Project">
												</a>
												<div class="mg-thumb-options">
													<div class="mg-zoom" data-toggle="modal" data-target="#imageModal"><i class="fa fa-search mg-zoom-search"></i></div>
													<div class="mg-toolbar">
														<div class="mg-option checkbox-custom checkbox-inline">
															<input type="checkbox" id="file_1" value="{{ image.id }}" class="file_i">
															<label for="file_1">SELECT</label>
														</div>
														<div class="mg-group pull-right">
															<!-- <a href="#">EDIT</a>
															<button class="dropdown-toggle mg-toggle" type="button" data-toggle="dropdown">
																<i class="fa fa-caret-up"></i>
															</button> -->
															<ul class="dropdown-menu mg-menu" role="menu">
																<li><a href="#"><i class="fa fa-download"></i> Download</a></li>
																<li><a href="#"><i class="fa fa-trash-o"></i> Delete</a></li>
															</ul>
														</div>
													</div>
												</div>
											</div>
											<h5 class="mg-title text-semibold">{{ image.image.name }}</h5>
											<div class="mg-description">
												<!-- <small class="pull-left text-muted">Site, X</small> -->
												<small class="pull-right text-muted">{{ image.created_at }}</small>
											</div>
										</div>
									</div>
									{% endfor %}


								</div>
							</div>
						</div>
					</section>
					<!-- end: page -->

<!-- Add images to Folder Modal -->
<div class="modal" id="add_to_folder">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
          <div class="container-fluid">
          		<div class="row">
          			<div class="col-12">
          				<h5>Select folder to add images to</h5>
          			</div>
          		</div>
              <div class="row my-4">
                <ul class="mg-folders">
					{% for directory in directories %}
						{% if directory != ".DS_Store" %}
							{% if directory == "report_images"%}
							{% else %}
								<li>
									<form method="POST" action="{% url 'analytics:add_to_folder' %}">
										{% csrf_token %}
										<input type="hidden" name="folder_name" value="{{ directory }}" />
										<input type="hidden" name="selected_images" class="selected_images" value="">
										<button type="submit" class="menu-item my-2"><i class="fa fa-folder"></i> {{ directory }}</button>
									</form>
								</li>
							{% endif %}
						{% endif %}
					{% endfor %}
				</ul>
              </div>
          </div>
      </div>
    </div>
  </div>
</div>
				</section>
{% endblock %}